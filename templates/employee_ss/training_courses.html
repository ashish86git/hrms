{% extends "layout.html" %}
{% block title %}Training & Development{% endblock %}

{% block content %}
<div class="max-w-5xl mx-auto space-y-8">

    <!-- ================= HEADER ================= -->
    <div class="content-header">
        <h1 class="text-3xl font-black text-gray-900 tracking-tight">Learning & Development</h1>
        <p class="text-gray-500">
            {% if current_user.role == 'admin' %}
                Track training & performance across all employees
            {% elif current_user.role == 'manager' %}
                Monitor team training and manage assignments
            {% else %}
                Enhance your skills with assigned courses
            {% endif %}
        </p>
    </div>

    <!-- ================= PERFORMANCE RATING ================= -->
    {% if performance %}
    <div class="bg-gradient-to-r from-indigo-600 to-violet-600 p-8 rounded-3xl text-white shadow-xl shadow-indigo-100">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-indigo-100 text-sm font-bold uppercase tracking-widest mb-1">Current Rating</p>
                <h2 class="text-3xl font-black">
                    {% if current_user.role in ['admin','manager'] %}
                        {{ performance.team_avg_rating or 'N/A' }}
                    {% else %}
                        {{ performance.rating }}
                    {% endif %}
                </h2>
            </div>
            <i data-lucide="award" class="w-12 h-12 text-indigo-200 opacity-50"></i>
        </div>
    </div>
    {% endif %}

    <!-- ================= COURSES GRID ================= -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        {% if courses %}
            {% for course in courses %}
            <div class="bg-white p-6 rounded-3xl border border-gray-100 shadow-sm flex items-center justify-between group hover:border-indigo-200 transition">

                <!-- ICON + INFO -->
                <div class="flex items-center">
                    <div class="w-12 h-12 rounded-2xl bg-gray-50 text-indigo-600 flex items-center justify-center mr-4 group-hover:bg-indigo-50 transition">
                        <i data-lucide="book-open" class="w-6 h-6"></i>
                    </div>
                    <div>
                        <h4 class="font-bold text-gray-900">
                            {% if current_user.role in ['admin','manager'] %}
                                {{ course.employee_name }}: {{ course.title }}
                            {% else %}
                                {{ course.title }}
                            {% endif %}
                        </h4>
                        <p class="text-xs font-bold uppercase text-gray-400 tracking-tighter">{{ course.status }}</p>
                    </div>
                </div>

                <!-- ACTION BUTTON -->
                {% if course.status == 'Completed' %}
                    <i data-lucide="check-circle-2" class="text-green-500 w-6 h-6"></i>
                {% else %}
                    {% if current_user.role != 'admin' %}
                        <button class="bg-gray-100 text-gray-600 px-4 py-2 rounded-xl text-xs font-black hover:bg-indigo-600 hover:text-white transition">CONTINUE</button>
                    {% else %}
                        <span class="text-gray-400 text-xs font-black uppercase">Pending</span>
                    {% endif %}
                {% endif %}
            </div>
            {% endfor %}
        {% else %}
            <div class="col-span-full py-24 text-center bg-white rounded-[3rem] border-4 border-dashed border-gray-50">
                <div class="w-20 h-20 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i data-lucide="book-open" class="w-10 h-10 text-gray-200"></i>
                </div>
                <p class="text-gray-400 font-black uppercase tracking-widest">No training courses assigned.</p>
            </div>
        {% endif %}
    </div>

</div>
{% endblock %}